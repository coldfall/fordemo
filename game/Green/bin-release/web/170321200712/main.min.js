var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function s(s){t.call(i,s,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?s(n):RES.getResAsync(e,s,this)}else RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var CommonClass=function(){function e(){}var t=(__define,e);t.prototype;return e.SetCenter=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=e.x+e.width/2,e.y=e.y+e.height/2},e.GetRnd=function(e){return Math.ceil(e*Math.random())},e.STATUSNORMAL="normal",e.STATUSHURRY="hurry",e.STATUSFLY="fly",e.STATUSFINAL="final",e.myscore=0,e.singlescore=100,e.runspeed=8,e.flyspeed=12,e.engame=!1,e.guideplayed=!1,e}();egret.registerClass(CommonClass,"CommonClass");var FailView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/FailViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},s.onAddToStage=function(){this.alpha=0,this.btnagain.alpha=0,this.f1.alpha=0;var e=this;egret.Tween.get(this).to({alpha:1},500).call(function(){e.btnagain.y=456,egret.Tween.get(e.btnagain).to({y:406,alpha:1},500,egret.Ease.backOut),egret.Tween.get(e.f1).to({alpha:1},500)},this),this.btnagain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAgain,this)},s.onClickAgain=function(){this.stage.dispatchEvent(new GameEvent(GameEvent.GAMEAGAIN))},t}(eui.Component);egret.registerClass(FailView,"FailView");var FinishFailView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/FinishFailViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){CommonClass.SetCenter(this.r1),CommonClass.SetCenter(this.r2),CommonClass.SetCenter(this.r3),this.onAddToStage()},s.onAddToStage=function(){console.log(this.stage),this["float"].alpha=0,this.bg.alpha=0,this.light.alpha=0,this.f1.alpha=0,this.f2.alpha=0,this.f1.x=500,this.f2.x=-100,this.r1.scaleX=0,this.r1.scaleY=0,this.r1.alpha=.4,this.r2.scaleX=0,this.r2.scaleY=0,this.r2.alpha=.2,this.r3.scaleX=0,this.r3.scaleY=0,this.r3.alpha=1;var e=this;egret.Tween.get(this.light).to({alpha:1},500).call(function(){egret.Tween.get(e.bg).to({alpha:1},10),egret.Tween.get(e.light).to({alpha:0},500).call(function(){egret.Tween.get(e.r1).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(e.r2).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(e.r3).wait(500).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut).call(e.onShowFloat,e)},e)},this)},s.onShowFloat=function(){var e=this;egret.Tween.get(this.f1).to({x:412,alpha:1},500,egret.Ease.backOut),egret.Tween.get(this.f2).to({x:0,alpha:1},500).call(function(){egret.Tween.get(e["float"]).wait(1e3).to({alpha:1},500).call(function(){setTimeout(function(){egret.Tween.get(e.light).to({alpha:1},500).call(function(){e.stage.dispatchEvent(new GameEvent(GameEvent.SHOWFAIL))},e)},1e3)},e)},this)},t}(eui.Component);egret.registerClass(FinishFailView,"FinishFailView");var FinishView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/FinishViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.onAddToStage()},s.onAddToStage=function(){CommonClass.SetCenter(this.r1),CommonClass.SetCenter(this.r2),CommonClass.SetCenter(this.r3),this["float"].alpha=0,this.bg.alpha=0,this.light.alpha=0,this.f1.alpha=0,this.f2.alpha=0,this.f1.x=-120,this.f2.x=680,this.r1.scaleX=0,this.r1.scaleY=0,this.r1.alpha=.4,this.r2.scaleX=0,this.r2.scaleY=0,this.r2.alpha=.2,this.r3.scaleX=0,this.r3.scaleY=0,this.r3.alpha=1;var e=this;egret.Tween.get(this.light).to({alpha:1},500).call(function(){egret.Tween.get(e.bg).to({alpha:1},10),egret.Tween.get(e.light).to({alpha:0},500).call(function(){egret.Tween.get(e.r1).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(e.r2).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(e.r3).wait(500).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut).call(e.onShowFloat,e)},e)},this)},s.onShowFloat=function(){var e=this;egret.Tween.get(this.f1).to({x:78,alpha:1},500,egret.Ease.backOut),egret.Tween.get(this.f2).to({x:480,alpha:1},500,egret.Ease.backOut).call(function(){egret.Tween.get(e["float"]).wait(1e3).to({alpha:1},500).call(function(){setTimeout(function(){egret.Tween.get(e.light).to({alpha:1},500).call(function(){e.stage.dispatchEvent(new GameEvent(GameEvent.SHOWRESULT))},e)},1e3)},e)},this)},t}(eui.Component);egret.registerClass(FinishView,"FinishView");var GameEvent=function(e){function t(t,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),e.call(this,t,i,s)}__extends(t,e);var i=(__define,t);i.prototype;return t.SHOWRULE="showrule",t.SHOWGAME="showgame",t.SHOWFINISHFAIL="showfinishfail",t.SHOWFINISHRESULT="showfinishresult",t.SHOWRESULT="showresult",t.SHOWFAIL="showfail",t.GAMEAGAIN="gameagain",t.ADDSCORE="addscore",t.NEXTSTAGE="nextstage",t}(egret.Event);egret.registerClass(GameEvent,"GameEvent");var GameView=function(e){function t(){e.call(this),this.roadcnt=0,this.singlewidth=1884,this.totaltime=60,this.movespeed=0,this.destspeed=8,this.initx=101,this.iniroadx=1150,this.roadmaps=[1,1,0,2,1,0,3,1,0,1,0,2,0,3,0,2,0,3,0,1,0,1,0,3,0,2,0,1,1,0,2,1,0,3,2,0,0,3,2,1,0,2,2,0,3,3,0,2,2,3,3,1,0,2,2,0,2,3,3,0,1,1,2,2,1,3,0,1],this.rwidth=500,this.acctime=3,this.lasty=0,this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/GameViewSkin.exml",this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){},s.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.InitUI(),this.InitGame(),this.msk.touchEnabled=!1,this.alpha=0,egret.Tween.get(this).to({alpha:1},500).call(this.StartGuide,this)},s.InitUI=function(){this.guides.visible=!0,this.guide1.alpha=0,this.guide1.visible=!1,this.btnNext.alpha=0,this.btnNext.visible=!1,this.btnNext2.alpha=0,this.btnNext2.visible=!1,this.guide2.alpha=0,this.guide2.visible=!1,this.guide3.alpha=0,this.guide3.visible=!1,this.btnGo.alpha=0,this.btnGo.visible=!1,this.btnSkip.alpha=0,this.btnSkip.visible=!1,CommonClass.myscore=0,this.txtscore.text=CommonClass.myscore+"",this.txtscore.x=896+(130-this.txtscore.textWidth)/2,this.imgend1.alpha=0,this.imgend1.scaleX=0,this.imgend1.scaleY=0,this.imgend1.visible=!1,this.imgend2.alpha=0,this.imgend2.visible=!1,CommonClass.SetCenter(this.imgend2)},s.SetScore=function(e){CommonClass.myscore=e,this.txtscore.text=CommonClass.myscore+"",this.txtscore.x=896+(130-this.txtscore.textWidth)/2},s.InitGame=function(){console.log("InitGame"),egret.Tween.removeAllTweens(),this.curtime=this.totaltime,this.SetTime()},s.SetTime=function(){this.timebar.scaleX=this.curtime/this.totaltime},s.StartGuide=function(){0==CommonClass.guideplayed?(this.guides.visible=!0,this.guide1.visible=!0,this.guide1.alpha=0,this.btnNext.visible=!0,this.btnSkip.alpha=0,this.btnSkip.visible=!0,egret.Tween.get(this.guide1).to({alpha:1},500),egret.Tween.get(this.btnNext).to({alpha:1},500),egret.Tween.get(this.btnSkip).to({alpha:1},500),this.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickNext,this),this.btnSkip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSkip,this)):this.StartNow()},s.onClickNext=function(){var e=this;egret.Tween.get(this.guide1).to({alpha:0},500),egret.Tween.get(this.btnNext).to({alpha:0},500).call(function(){e.guide1.visible=!1,e.btnNext.visible=!1,e.guide2.visible=!0,e.guide2.alpha=0,e.btnNext2.visible=!0,egret.Tween.get(e.guide2).to({alpha:1},500),egret.Tween.get(e.btnNext2).to({alpha:1},500),e.btnNext2.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickNext2,e)},this)},s.onClickNext2=function(){var e=this;egret.Tween.get(this.btnSkip).to({alpha:0},500),egret.Tween.get(this.guide2).to({alpha:0},500),egret.Tween.get(this.btnNext2).to({alpha:0},500).call(function(){e.guide2.visible=!1,e.btnNext2.visible=!1,e.btnSkip.visible=!1,e.guide3.visible=!0,e.guide3.alpha=0,e.btnGo.visible=!0,egret.Tween.get(e.guide3).to({alpha:1},500),egret.Tween.get(e.btnGo).to({alpha:1},500),e.btnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickSkip,e)},this)},s.onClickSkip=function(){this.guide1.alpha>0?(egret.Tween.get(this.guide1).to({alpha:0},500),egret.Tween.get(this.btnNext).to({alpha:0},500).call(this.StartNow,this)):this.guide2.alpha>0?(egret.Tween.get(this.guide2).to({alpha:0},500),egret.Tween.get(this.btnNext2).to({alpha:0},500).call(this.StartNow,this)):this.guide3.alpha>0&&(egret.Tween.get(this.guide3).to({alpha:0},500),egret.Tween.get(this.btnGo).to({alpha:0},500).call(this.StartNow,this))},s.StartNow=function(){console.log("StartNow"),this.guides.visible=!1,CommonClass.guideplayed=!0,CommonClass.engame=!0,this.acctime=3,this.imgleft.source=RES.getRes("num"+this.acctime+"_png"),this.InitRoad(),this.InitChars(),this.InitControl(),this.hint.alpha=0,this.hint.scaleX=0,this.hint.scaleY=0,this.curtime=this.totaltime,this.gametimer=new egret.Timer(1e3,0),this.gametimer.addEventListener(egret.TimerEvent.TIMER,this.onGameTime,this),this.gametimer.start()},s.InitRoad=function(){this.destspeed=CommonClass.runspeed,this.roadcnt=0,this.roads.x=this.initx,this.roadbgs.removeChildren(),this.roadassets.removeChildren(),this.bgfar.removeChildren(),this.bgfar.x=0;for(var e=0;20>e;e++)this.AddOneRoad(e);this.AddAssets(),this.movetimer=new egret.Timer(10,0),this.movetimer.addEventListener(egret.TimerEvent.TIMER,this.onMove,this),this.movetimer.start()},s.AddOneRoad=function(e){this.roadcnt++;var t=new eui.Image;t.source=RES.getRes("bgroadfront_png"),t.x=(this.roadcnt-1)*this.singlewidth,this.roadbgs.addChild(t);var i=new eui.Image;i.source=RES.getRes("bgroad_jpg"),i.x=(this.roadcnt-1)*this.singlewidth,this.bgfar.addChild(i)},s.AddAssets=function(){for(var e=0,t=0;t<this.roadmaps.length;t++){e=this.iniroadx+t*this.rwidth;var i=this.roadmaps[t];i>0&&(1==i?this.AddOneAsset1(e):2==i?this.AddOneAsset2(e):3==i&&this.AddOneAsset3(e))}},s.AddOneAsset1=function(e){for(var t=[[163,128],[242,128],[163,209],[242,209]],i=0;i<t.length;i++){var s=new HitObjects("drop");s.x=e+t[i][0],s.y=t[i][1],this.roadassets.addChild(s)}},s.AddOneAsset2=function(e){for(var t=[[29,209],[79,137],[151,84],[235,56],[316,84],[392,137],[436,209]],i=[183,215],s=0;s<t.length;s++){var n=new HitObjects("drop");n.x=e+t[s][0],n.y=t[s][1],this.roadassets.addChild(n)}var a=new HitObjects("block1");a.x=e+i[0],a.y=i[1],this.roadassets.addChild(a)},s.AddOneAsset3=function(e){for(var t=[[29,209],[79,137],[151,84],[235,56],[316,84],[392,137],[436,209]],i=[183,215],s=0;s<t.length;s++){var n=new HitObjects("drop");n.x=e+t[s][0],n.y=t[s][1],this.roadassets.addChild(n)}var a=new HitObjects("block2");a.x=e+i[0],a.y=i[1],this.roadassets.addChild(a)},s.onMove=function(){CommonClass.engame&&(this.roads.x-=this.movespeed,this.bgfar.x-=.5*this.movespeed,this.movespeed>this.destspeed?this.movespeed--:this.movespeed<this.destspeed&&this.movespeed++,this.CheckHit())},s.InitChars=function(){this.chars.removeChildren(),this.charmonster=new Monster,this.charmonster.x=-250,this.charmonster.y=152,this.chars.addChild(this.charmonster),this.charrunjie=new RunJie,this.charrunjie.x=107,this.charrunjie.y=212,this.chars.addChild(this.charrunjie)},s.CheckHit=function(){if(this.charrunjie.enablecheck)for(var e=0;e<this.roadassets.numChildren;e++){var t=this.roadassets.getChildAt(e);if(t.x+this.roads.x>=0&&t.x+this.roads.x<=1138&&t.enablehit){var i=new egret.Point(this.charrunjie.x+61+this.charrunjie.width,this.charrunjie.y+141),s=new egret.Point(this.charrunjie.x+101+this.charrunjie.width/2,this.charrunjie.y+this.charrunjie.height/2+141);new egret.Point(this.charrunjie.x+61+this.charrunjie.width,this.charrunjie.y+141+this.charrunjie.height);if(t.hitTestPoint(i.x,i.y,!1)||t.hitTestPoint(s.x,s.y,!1))if(console.log("hit"),"drop"==t.mytype){var n=this;t.enablehit=!1,egret.Tween.get(t).to({y:-50,x:t.x+800},700).call(function(e){n.roadassets.removeChild(e)},this,[t]),this.SetScore(CommonClass.myscore+CommonClass.singlescore);var a=Math.ceil(20*Math.random());1==a&&this.ShowHint()}else if("block1"==t.mytype||"block2"==t.mytype){var n=this;this.charrunjie.enablecheck=!1,this.charrunjie.status==CommonClass.STATUSNORMAL?(this.charrunjie.SetStatus(CommonClass.STATUSHURRY),this.charrunjie.Fall(),this.movespeed=0,setTimeout(function(){n.charrunjie.enablecheck=!0},500),egret.Tween.get(this.charmonster).to({x:-23},500).call(function(){setTimeout(function(){console.log(n.charrunjie.status),n.charrunjie.status==CommonClass.STATUSHURRY&&CommonClass.engame&&(n.charrunjie.SetStatus(CommonClass.STATUSNORMAL),egret.Tween.get(n.charmonster).to({x:-250},500))},5e3)},this)):this.charrunjie.status==CommonClass.STATUSHURRY&&this.ShowFail()}}}},s.InitControl=function(){this.msk.touchEnabled=!0,this.msk.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTDown,this),this.msk.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTMove,this),this.msk.addEventListener(egret.TouchEvent.TOUCH_END,this.onTUp,this),CommonClass.SetCenter(this.btnacc),this.btnacc.touchEnabled=!1,this.btnacc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAcc,this)},s.onClickAcc=function(){if(CommonClass.engame){var e=this;this.acctime>0&&(this.charrunjie.status==CommonClass.STATUSNORMAL||this.charrunjie.status==CommonClass.STATUSHURRY)&&(this.charrunjie.status==CommonClass.STATUSHURRY&&egret.Tween.get(e.charmonster).to({x:-250},500),this.acctime--,this.imgleft.source=RES.getRes("num"+this.acctime+"_png"),this.acctime<=0&&(this.btnacc.touchEnabled=!1,egret.Tween.get(this.btnacc).wait(500).to({scaleX:0,scaleY:0},500).call(function(){e.btnacc.visible=!1},this)),this.charrunjie.SetStatus(CommonClass.STATUSFLY),this.charrunjie.y=71,this.flytimer=new egret.Timer(4e3,1),this.flytimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onFlyEnd,this),this.flytimer.start(),this.destspeed=CommonClass.flyspeed)}},s.onFlyEnd=function(){this.charrunjie.SetStatus(CommonClass.STATUSNORMAL),this.charrunjie.y=212,this.charrunjie.enablecheck=!0,this.destspeed=CommonClass.runspeed},s.onTDown=function(e){if(this.charrunjie.status==CommonClass.STATUSFLY)this.lasty=e.stageY-141;else if(0==this.charrunjie.isjumping&&(this.charrunjie.status==CommonClass.STATUSNORMAL||this.charrunjie.status==CommonClass.STATUSHURRY)){var t=this;this.charrunjie.isjumping=!0,this.charrunjie.Jump(),egret.Tween.get(this.charrunjie).to({y:2},400,egret.Ease.sineOut).call(function(){egret.Tween.get(t.charrunjie).to({y:212},400,egret.Ease.sineIn).call(function(){t.charrunjie.isjumping=!1},t)},this)}},s.onTMove=function(e){if(this.charrunjie.status==CommonClass.STATUSFLY){var t=e.stageY-141;this.charrunjie.y+=(t-this.lasty)/3,this.charrunjie.y<0&&(this.charrunjie.y=0),this.charrunjie.y>150&&(this.charrunjie.y=150),this.lasty=t}},s.onTUp=function(e){},s.ShowHint=function(){if(0==this.hint.scaleX){var e=this;egret.Tween.get(this.hint).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut).call(function(){egret.Tween.get(e.hint).wait(3e3).to({scaleX:0,scaleY:0,alpha:0},500,egret.Ease.backIn).call(function(){},this)},this)}},s.ShowFail=function(){this.destspeed=0;var e=this;this.charrunjie.SetStatus(CommonClass.STATUSHURRY),egret.Tween.get(e.charmonster).to({x:20},500),this.movetimer&&(this.movetimer.stop(),this.movetimer=null),this.gametimer&&(this.gametimer.stop(),this.gametimer=null),this.hurrytimer&&(this.hurrytimer.stop(),this.hurrytimer=null),setTimeout(function(){console.log("fail"),CommonClass.engame=!1,e.stage.dispatchEvent(new GameEvent(GameEvent.SHOWFAIL)),e.roadassets.removeChildren()},1e3),TrackBaiduEvent("Fail")},s.onGameTime=function(){CommonClass.engame&&(this.curtime--,this.SetTime(),this.curtime<=0&&this.SetEnd())},s.SetEnd=function(){console.log("SetEnd"),this.gametimer.stop(),this.gametimer=null,this.charrunjie.SetStatus(CommonClass.STATUSFINAL),this.charrunjie.enablecheck=!1,this.imgendbuilding=new eui.Image,this.imgendbuilding.source=RES.getRes("imgend3_png"),this.imgendbuilding.y=18,this.imgendbuilding.x=-1*this.roads.x+1138;var e=this;egret.Tween.get(this.charmonster).to({alpha:0},500),egret.Tween.get(this.roadassets).to({alpha:0},300).call(function(){e.roadassets.removeChildren(),e.roadassets.addChild(e.imgendbuilding),e.roadassets.alpha=1,setTimeout(function(){CommonClass.engame=!1,e.EndMov()},1500)},this)},s.EndMov=function(){var e=this;egret.Tween.get(this.charrunjie).to({x:409,alpha:0},500).call(function(){e.imgend1.visible=!0,e.imgend2.visible=!0,egret.Tween.get(e.imgend1).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut),egret.Tween.get(e.imgend2).to({alpha:1},500).call(function(){egret.Tween.get(e.imgend2,{loop:!0}).to({rotation:360},4e3)},e),setTimeout(function(){e.ShowFinish()},2e3)},this)},s.ShowFinish=function(){console.log("FINISH"),CommonClass.myscore<1e3?(TrackBaiduEvent("Fail"),this.stage.dispatchEvent(new GameEvent(GameEvent.SHOWFAIL))):(TrackBaiduEvent("Win"),this.stage.dispatchEvent(new GameEvent(GameEvent.SHOWRESULT)))},t}(eui.Component);egret.registerClass(GameView,"GameView");var HitObjects=function(e){function t(t){e.call(this),this.mytype=t,"drop"==t?this.source=RES.getRes("drop_png"):"block1"==t?this.source=RES.getRes("block1_png"):"block2"==t&&(this.source=RES.getRes("block2_png")),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(e){this.enablehit=!0},t}(eui.Image);egret.registerClass(HitObjects,"HitObjects");var HitWords=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(){var e=CommonClass.GetRnd(5);this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.img=new eui.Image,this.img.texture=RES.getRes("hitword"+e+"_png"),this.img.x=-361,this.img.y=-89,this.addChild(this.img),this.alpha=0,this.scaleX=0,this.scaleY=0,this.touchEnabled=!1,this.touchChildren=!1;var t=this;egret.Tween.get(this).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.backOut).call(function(){egret.Tween.get(t).wait(300).to({alpha:0},300).call(t.onE,t)},this)},s.onE=function(){this.visible=!1,this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(HitWords,"HitWords");var IndexView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/StartViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},s.onAddToStage=function(){CommonClass.SetCenter(this.r1),CommonClass.SetCenter(this.r2),CommonClass.SetCenter(this.r3),CommonClass.SetCenter(this.rbig),this.r1.scaleX=0,this.r1.scaleY=0,this.r1.alpha=.6,this.r2.scaleX=0,this.r2.scaleY=0,this.r2.alpha=.2,this.r2.rotation=90,this.r3.scaleX=0,this.r3.scaleY=0,this.r3.alpha=.5,this.r3.rotation=-65,this.rbig.alpha=1,this.rbig.scaleX=0,this.rbig.scaleY=0,this.ani1.alpha=0,this.ani2.alpha=0,this.ani3.alpha=0,this.ani4.alpha=0,this.ani4.scaleX=0,this.ani4.scaleY=0,CommonClass.SetCenter(this.ani4),CommonClass.SetCenter(this.word1),this.word1.alpha=0,this.word1.scaleX=0,this.word1.scaleY=0,this.alpha=0,egret.Tween.get(this).to({alpha:1},500).call(this.IndexAni,this),TrackBaiduEvent("startview")},s.IndexAni=function(){egret.Tween.get(this.r1).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(this.r2).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(this.r3).to({scaleX:1,scaleY:1},500,egret.Ease.backOut),egret.Tween.get(this.rbig).wait(200).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut).call(this.Anis,this)},s.Anis=function(){var e=this;egret.Tween.get(this.ani1).to({alpha:1},500),egret.Tween.get(this.word1).wait(500).to({scaleX:1,scaleY:1,alpha:1},1e3,egret.Ease.elasticOut).call(function(){egret.Tween.get(this.word1).wait(1500).to({scaleX:0,scaleY:0,alpha:0},500,egret.Ease.backIn),egret.Tween.get(this.ani1).wait(1500).to({alpha:0},500).call(function(){e.ani3.x=159,egret.Tween.get(e.ani3).to({x:189,alpha:1},300).call(function(){},e),e.ani2.y=337,egret.Tween.get(e.ani2).wait(600).to({y:317,alpha:1},300).call(function(){e.ani4.alpha=1,egret.Tween.get(e.ani4).wait(500).to({scaleX:1,scaleY:1,alpha:1},1e3,egret.Ease.elasticOut).call(function(){e.onAniEnd()},e)},e)},e)},this)},s.onAniEnd=function(){this.ShowGame()},s.ShowGame=function(){egret.Tween.removeAllTweens();var e=this;setTimeout(function(){e.stage.dispatchEvent(new GameEvent(GameEvent.SHOWGAME))},1e3)},t}(eui.Component);egret.registerClass(IndexView,"IndexView");var LoadingUI=function(e){function t(){e.call(this),this.skinName="resource/gameskins/LoaderViewSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},s.onAddToStage=function(){console.log("tt"),console.log("bg"+this.bg),this.num.text="0%"},s.setProgress=function(e,t){this.num.text=Math.ceil(100*e/t)+"%"},t}(eui.Component);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("load")},s.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},s.onResourceLoadComplete=function(e){"preload"==e.groupName?(this.stage.removeChild(this.loadingView),this.loadingView=null,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene()):"load"==e.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),setTimeout(function(){RES.loadGroup("preload")},1e3))},s.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},s.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},s.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},s.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},s.startCreateScene=function(){this.indexv=new IndexView,this.stage.addChild(this.indexv),this.stage.addEventListener(GameEvent.SHOWGAME,this.onShowGame,this),this.stage.addEventListener(GameEvent.SHOWRESULT,this.onShowResult,this),this.stage.addEventListener(GameEvent.SHOWFAIL,this.onShowFail,this),this.stage.addEventListener(GameEvent.GAMEAGAIN,this.onGameAgain,this),TrackBaiduEvent("start")},s.onShowGame=function(){this.gamev=null;var e=new GameView;this.gamev=e,this.stage.addChild(this.gamev);var t=this;setTimeout(function(){t.stage.removeChild(t.indexv),t.indexv=null},1e3),TrackBaiduEvent("showgame")},s.onShowResult=function(){this.reslutv=new ResultView,this.stage.addChild(this.reslutv);var e=this;setTimeout(function(){e.stage.removeChild(e.gamev),e.finishv=null},1e3),TrackBaiduEvent("showresult")},s.onShowFail=function(){this.failv=new FailView,this.stage.addChild(this.failv);var e=this;setTimeout(function(){e.stage.removeChild(e.gamev),e.finishfailv=null},1e3),TrackBaiduEvent("showfail")},s.onGameAgain=function(){this.gamev=new GameView,this.stage.addChild(this.gamev);var e=this;setTimeout(function(){null!=e.failv?(e.stage.removeChild(e.failv),e.failv=null):null!=e.reslutv&&(e.stage.removeChild(e.reslutv),e.reslutv=null)},1e3),TrackBaiduEvent("gameagain")},t}(eui.UILayer);egret.registerClass(Main,"Main");var Monster=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(e){this.source=RES.getRes("monster_png"),console.log("addmonster")},t}(eui.Image);egret.registerClass(Monster,"Monster");var ResultView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/FinalViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},s.onAddToStage=function(){this.sharemask.visible=!1,this.sharemask.alpha=0;var e=Math.ceil(100*CommonClass.myscore/5e3);e>=100&&(e=99),this.txtper.text=e+"%",this.mark.alpha=0;var t=CommonClass.myscore,i="";2e3>t?(this.mark.source=RES.getRes("award_1_png"),i="爱护眼小能手",TrackBaiduEvent("getch1")):t>=2e3&&3e3>t?(this.mark.source=RES.getRes("award_2_png"),i="眼健康小卫士",TrackBaiduEvent("getch2")):t>=3e3&&(this.mark.source=RES.getRes("award_3_png"),i="视疲劳小战士",TrackBaiduEvent("getch3")),this.mark.alpha=0,this.alpha=0,this.btnagain.alpha=0,this.btnshare.alpha=0,CommonClass.SetCenter(this.btnshare),CommonClass.SetCenter(this.btnagain),egret.Tween.get(this).to({alpha:1},500).call(this.InitAni,this),SetWXShareWord(CommonClass.myscore,i,this.txtper.text)},s.InitAni=function(){egret.Tween.get(this.mark).to({alpha:1},500),this.btnshare.scaleX=0,this.btnshare.scaleY=0,this.btnagain.scaleX=0,this.btnagain.scaleY=0,egret.Tween.get(this.btnshare).wait(300).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut),egret.Tween.get(this.btnagain).wait(400).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut),this.btnshare.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickShare,this),this.btnagain.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickAgain,this),this.sharemask.touchEnabled=!0,this.sharemask.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickShareMask,this)},s.onClickShare=function(){this.sharemask.alpha=0,this.sharemask.visible=!0,egret.Tween.get(this.sharemask).to({alpha:1},500)},s.onClickAgain=function(){location.href="../main/online.html"},s.onClickShareMask=function(){var e=this;egret.Tween.get(this.sharemask).to({alpha:0},500).call(function(){e.sharemask.visible=!1},this)},t}(eui.Component);egret.registerClass(ResultView,"ResultView");var RullView=function(e){function t(){e.call(this),this.addEventListener(eui.UIEvent.COMPLETE,this.uiLoaded,this),this.skinName="resource/gameskins/RuleViewSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.uiLoaded=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)},s.onAddToStage=function(){this.alpha=0,this.btnstart.alpha=0,this.r1.alpha=0,this.r2.alpha=0,this.r3.alpha=0,this.rp.alpha=0,CommonClass.SetCenter(this.btnstart),egret.Tween.get(this).to({alpha:1},500).call(this.InitAni,this)},s.InitAni=function(){var e=this;egret.Tween.get(this.r1).to({alpha:.6},500),egret.Tween.get(this.r2).wait(200).to({alpha:.3},500),egret.Tween.get(this.r3).wait(300).to({alpha:1},500),this.rp.y=164,this.btnstart.scaleX=0,this.btnstart.scaleY=0,egret.Tween.get(this.rp).wait(800).to({y:214,alpha:1},300).call(function(){egret.Tween.get(e.btnstart).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut)},this),this.btnstart.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickStart,this)},s.onClickStart=function(){var e=this;egret.Tween.removeAllTweens(),egret.Tween.get(this).to({alpha:0},500).call(function(){e.stage.dispatchEvent(new GameEvent(GameEvent.SHOWGAME))},this),TrackBaiduEvent("startgame")},t}(eui.Component);egret.registerClass(RullView,"RullView");var RunJie=function(e){function t(){e.call(this),this.status="",this.isjumping=!1,this.enablecheck=!0,this.data=RES.getRes("acts_json"),this.txtr=RES.getRes("acts_png"),this.mcFactory=new egret.MovieClipDataFactory(this.data,this.txtr),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(e){this.isjumping=!1,this.enablecheck=!0,this.mcrun=new egret.MovieClip(this.mcFactory.generateMovieClipData("run")),this.mcrun.anchorOffsetX=0,this.mcrun.anchorOffsetY=0,console.log(this.mcrun.width),this.mcrun.scaleX=this.mcrun.scaleY=112/this.mcrun.width,this.mcrun.x=-52,this.mcrun.y=-26,this.mcrun.visible=!1,this.addChild(this.mcrun),this.mcfly=new egret.MovieClip(this.mcFactory.generateMovieClipData("fly")),this.mcfly.anchorOffsetX=0,this.mcfly.anchorOffsetY=0,this.mcfly.scaleX=this.mcfly.scaleY=131/this.mcfly.width,this.mcfly.x=-52,this.mcfly.y=-12,this.mcfly.visible=!1,this.addChild(this.mcfly),this.mchurry=new egret.MovieClip(this.mcFactory.generateMovieClipData("hurry")),this.mchurry.anchorOffsetX=0,this.mchurry.anchorOffsetY=0,this.mchurry.scaleX=this.mchurry.scaleY=130/this.mchurry.width,this.mchurry.x=-46,this.mchurry.y=-50,this.mchurry.visible=!1,this.addChild(this.mchurry),this.mcjump=new egret.MovieClip(this.mcFactory.generateMovieClipData("jump")),this.mcjump.anchorOffsetX=0,this.mcjump.anchorOffsetY=0,this.mcjump.scaleX=this.mcjump.scaleY=112/this.mcjump.width,this.mcjump.x=-52,this.mcjump.y=-52,this.mcjump.visible=!1,this.addChild(this.mcjump),this.mcfall=new egret.MovieClip(this.mcFactory.generateMovieClipData("jump")),this.mcfall.anchorOffsetX=0,this.mcfall.anchorOffsetY=0,this.mcfall.scaleX=this.mcfall.scaleY=112/this.mcfall.width,this.mcfall.x=-52,this.mcfall.y=-72,this.mcfall.visible=!1,this.addChild(this.mcfall),this.mybmp=new eui.Image,this.mybmp.source=RES.getRes("char_normal_png"),this.addChild(this.mybmp),this.mybmp.alpha=0,this.SetStatus(CommonClass.STATUSNORMAL)},s.SetStatus=function(e){this.mcrun.stop(),this.mcrun.visible=!1,this.mcfly.stop(),this.mcfly.visible=!1,this.mchurry.stop(),this.mchurry.visible=!1,this.mcjump.stop(),this.mcjump.visible=!1,e==CommonClass.STATUSNORMAL?(this.mcrun.visible=!0,this.mcrun.play(-1)):e==CommonClass.STATUSHURRY||(e==CommonClass.STATUSFLY?(this.mcfly.visible=!0,this.mcfly.play(-1)):e==CommonClass.STATUSFINAL&&(this.mcrun.visible=!0,this.mcrun.play(-1))),this.status=e},s.Jump=function(){if(0==this.mcfall.visible){var e=this;this.mcrun.stop(),this.mcrun.visible=!1,this.mcfly.stop(),this.mcfly.visible=!1,this.mcfall.visible=!1,this.mcfall.stop(),this.mchurry.stop(),this.mchurry.visible=!1,this.mcjump.visible=!0,this.mcjump.gotoAndPlay(0,1),setTimeout(function(){e.mcjump.stop(),e.mcjump.visible=!1,e.status==CommonClass.STATUSNORMAL?(e.mcrun.visible=!0,e.mcrun.play(-1)):e.status==CommonClass.STATUSHURRY&&(e.mchurry.visible=!0,e.mchurry.play(-1))},800)}},s.Fall=function(){if(0==this.mcjump.visible){var e=this;this.mcrun.stop(),this.mcrun.visible=!1,this.mcfly.stop(),this.mcfly.visible=!1,this.mcjump.stop(),this.mcjump.visible=!1,this.mchurry.stop(),this.mchurry.visible=!1,this.mcfall.visible=!0,this.mcfall.gotoAndPlay(0,1),setTimeout(function(){e.mcfall.stop(),e.mcfall.visible=!1,e.status==CommonClass.STATUSNORMAL?(e.mcrun.visible=!0,e.mcrun.play(-1)):e.status==CommonClass.STATUSHURRY&&(e.mchurry.visible=!0,e.mchurry.play(-1))
},500)}},t}(eui.Group);egret.registerClass(RunJie,"RunJie");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,s){function n(e){t.call(s,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var WaterImg=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.img=new eui.Image,this.img.texture=RES.getRes("water1_png"),this.img.x=-189,this.img.y=-93,this.addChild(this.img),this.alpha=1,this.touchEnabled=!1,this.touchChildren=!1;var e=this;setTimeout(function(){e.img.texture=RES.getRes("water2_png"),e.img.x=-149,e.img.y=-83,egret.Tween.get(e).to({alpha:0},500).call(e.onE,e)},100)},s.onE=function(){this.visible=!1,this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(WaterImg,"WaterImg");